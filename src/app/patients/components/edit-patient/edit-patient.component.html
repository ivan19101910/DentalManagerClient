<div class="form-wrapper" *ngIf="form; else loader">
  <form class="card" [formGroup]="form" (ngSubmit)="submit()" >
    <div class ="form-header">
      <h2>Редагування пацієнта</h2>
      <svg [routerLink]="['/patients']"
        class="close-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="32" height="32"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm0-9.414l2.828-2.829 1.415 1.415L13.414 12l2.829 2.828-1.415 1.415L12 13.414l-2.828 2.829-1.415-1.415L10.586 12 7.757 9.172l1.415-1.415L12 10.586z" fill="rgba(53,48,47,1)"/></svg>
    </div>
        <div
          class="form-control"
          [ngClass]="{invalid: form.get('name')?.touched && form.get('name')!.invalid}"
        >
          <label for="name" class="form-label">Ім'я:</label>
          <input class="form-input" id="name" type="text" formControlName="name">
          <div
            *ngIf="form.get('name')!.touched! && form.get('name')!.invalid"
            class="validation"
          >
            <div *ngIf="form.get('name')!.errors?.['required']">
              Введіть поле ім'я
            </div>
            <div *ngIf="form.get('name')!.errors?.['minlength'] && !form.get('name')!.errors?.['pattern']">
              Ім'я має бути довшим за 1 символ
            </div>
            <div *ngIf="form.get('name')!.errors?.['maxlength']">
              Ім'я не може бути довшим за 30 символів
            </div>
            <div *ngIf="form.get('name')!.errors?.['pattern'] ">
              Ім'я містить недопустимі символи
            </div>
          </div>
        </div>
        <div
          class="form-control"
          [ngClass]="{invalid: form.get('lastName')?.touched && form.get('lastName')!.invalid}"
        >
          <label for="lastName" class="form-label">Прізвище:</label>
          <input class="form-input" id="lastName" type="text" formControlName="lastName">
          <div
            *ngIf="form.get('lastName')!.touched! && form.get('lastName')!.invalid"
            class="validation"
          >
            <div *ngIf="form.get('lastName')!.errors?.['required']">
              Введіть поле прізвище
            </div>
            <div *ngIf="form.get('lastName')!.errors?.['maxlength']">
              Прізвище не може бути довшим за 30 символів
            </div>
            <div *ngIf="form.get('lastName')!.errors?.['pattern']">
              Прізвище містить недопустимі символи
            </div>
            <div *ngIf="form.get('lastName')!.errors?.['minlength'] && !form.get('lastName')!.errors?.['pattern']">
              Прізвище має бути довшим за 1 символи
            </div>
          </div>
        </div>
        <div
          class="form-control"
          [ngClass]="{invalid: form.get('address')?.touched && form.get('address')!.invalid}"
        >
          <label for="address" class="form-label">Адреса:</label>
          <input class="form-input" id="address" type="text" formControlName="address">
          <div
            *ngIf="form.get('address')!.touched! && form.get('address')!.invalid"
            class="validation"
          >
            <div *ngIf="form.get('address')!.errors?.['required']">
              Введіть поле адреса
            </div>
            <div *ngIf="form.get('address')!.errors?.['minlength'] && !form.get('address')!.errors?.['pattern']">
              Адреса має бути довшою за 4 символи
            </div>
            <div *ngIf="form.get('address')!.errors?.['maxlength']">
              Адреса не може бути довшою за 50 символів
            </div>
            <div *ngIf="form.get('address')!.errors?.['pattern']">
              Адреса містить недопустимі символи
            </div>
          </div>
        </div>
        <div
          class="form-control"
          [ngClass]="{invalid: form.get('phoneNumber')?.touched && form.get('phoneNumber')!.invalid}"
        >
          <label for="phoneNumber" class="form-label">Номер:</label>
          <input class="form-input" id="phoneNumber" type="text" formControlName="phoneNumber">
          <div
            *ngIf="form.get('phoneNumber')!.touched! && form.get('phoneNumber')!.invalid"
            class="validation"
          >
            <div *ngIf="form.get('phoneNumber')!.errors?.['required']">
              Введіть поле номер
            </div>
            <div *ngIf="form.get('phoneNumber')!.errors?.['minlength'] && !form.get('phoneNumber')!.errors?.['pattern']">
              Номер має бути довжиною 10 символів
            </div>
            <div *ngIf="form.get('phoneNumber')!.errors?.['maxlength'] && !form.get('phoneNumber')!.errors?.['pattern']">
              Номер має бути довжиною 10 символів
            </div>
            <div *ngIf="form.get('phoneNumber')!.errors?.['pattern'] ">
              Номер містить недопустимі символи
            </div>
          </div>
        </div>
        <div
            class="form-control"
            [ngClass]="{invalid: form.get('date')?.touched && form.get('date')!.invalid}"
          >
            <label for="date" class="form-label">Дата народження:</label>
            <input class="form-input" id="date" type="date" formControlName="date">
            <div
              *ngIf="form.get('date')!.touched! && form.get('date')!.invalid"
              class="validation"
            >
                Введіть поле дата народження
            </div>
          </div>
    <div class="button-section">
      <button
        type="submit"
        class="form-submit-btn"
        [disabled]="form.invalid || submitted"
      >Зберегти</button>
    </div>

  </form>
</div>

<ng-template #loader>
  <p class="text-center">Завантаження...</p>
</ng-template>
